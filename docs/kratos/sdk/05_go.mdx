---
id: go
title: Ory Identity Management Go SDK
sidebar_label: Go SDK
---

```mdx-code-block
import Tabs from "@theme/Tabs"
import TabItem from "@theme/TabItem"
import CodeBlock from "@theme/CodeBlock"
import { useLatestTag } from '@site/src/hooks'
```

In this document you can find code examples for the Ory Identities Go SDK.

:::info

Missing an example? Please create a
[feature request](https://github.com/ory/docs/issues/new?assignees=&labels=feat&template=FEATURE-REQUEST.yml) and it will be added
here.

You can find more examples of SDK usage in the auto-generated documentation
[`client-go`](https://github.com/ory/client-go/tree/master/docs).

:::

## Installation

If you are starting from scratch, first set up a new Go project

```bash
mkdir myproject
cd myproject
go mod init myproject
```

Install the Ory Go SDK

```mdx-code-block
<CodeBlock className="language-shell">{`go get github.com/ory/client-go@${useLatestTag('client-go', 'master')}`}</CodeBlock>
```

## Frontend API

The following code examples show how to use the Frontend API [`frontend`](https://www.ory.sh/docs/reference/api#tag/frontend).
These endpoints are used by frontend applications (e.g. Single-Page-App, Native Apps, Server Apps, ...) to manage a user's own
profile. There are two types of flows: native flows and browser flows. Native flows are used by **API clients**. Browser flows are
used by **browser clients**. Read the [Browser vs. native apps](https://www.ory.sh/docs/identities/native-browser) document and
the [Self-service flows](https://www.ory.sh/docs/kratos/self-service) overview to learn more.

### Browser clients

### API clients

### Create login flow

[Create a login flow for API clients](https://www.ory.sh/docs/reference/api#tag/frontend/operation/createNativeRegistrationFlow)
such as mobile devices or native applications. For browser clients use
[`CreateBrowserLoginFlow`](https://www.ory.sh/docs/reference/api#tag/frontend/operation/createBrowserLoginFlow).

```mdx-code-block
import createLogin from '!!raw-loader!../../../code-examples/sdk/go/frontend/create-login.go'

<CodeBlock language="go" title="login.go">{createLogin}</CodeBlock>
```

### Create registration flow

[Create a registration flow for API clients](https://www.ory.sh/docs/reference/api#tag/frontend/operation/createNativeRegistrationFlow)
such as mobile devices or native applications. For browser clients use
[`createBrowserLoginFlow`](https://www.ory.sh/docs/reference/api#tag/frontend/operation/createBrowserLoginFlow).

```mdx-code-block
import createRegistration from '!!raw-loader!../../../code-examples/sdk/go/frontend/create-registration.go'

<CodeBlock language="go" title="login.go">{createRegistration}</CodeBlock>
```

### Create recovery flow

[Create a recovery flow for API clients](https://www.ory.sh/docs/reference/api#tag/frontend/operation/createNativeRecoveryFlow)
such as mobile devices or native applications. For browser clients use
[`createBrowserRecoveryFlow`](https://www.ory.sh/docs/reference/api#tag/frontend/operation/createBrowserRecoveryFlow).

```mdx-code-block
import createRecovery from '!!raw-loader!../../../code-examples/sdk/go/frontend/create-recovery.go'

<CodeBlock language="go" title="login.go">{createRecovery}</CodeBlock>
```

### Create verification flow

[Create a verification flow for API clients](https://www.ory.sh/docs/reference/api#tag/frontend/operation/createNativeVerificationFlow)
such as mobile devices or native applications. For browser clients use
[`createBrowserRecoveryFlow`](https://www.ory.sh/docs/reference/api#tag/frontend/operation/createBrowserVerificationFlow).

```mdx-code-block
import createVerification from '!!raw-loader!../../../code-examples/sdk/go/frontend/create-verification.go'

<CodeBlock language="go" title="login.go">{createVerification}</CodeBlock>
```

### Get registration flow

[Get a registration flow](https://www.ory.sh/docs/reference/api#tag/frontend/operation/getRegistrationFlow).

```mdx-code-block
import getRegistration from '!!raw-loader!../../../code-examples/sdk/go/frontend/get-registration.go'

<CodeBlock language="go" title="login.go">{getRegistration}</CodeBlock>
```

### Get recovery flow

[Get a recovery flow](https://www.ory.sh/docs/reference/api#tag/frontend/operation/getRecoveryFlow).

```mdx-code-block
import getRecovery from '!!raw-loader!../../../code-examples/sdk/go/frontend/get-recovery.go'

<CodeBlock language="go" title="login.go">{getRecovery}</CodeBlock>
```

### Get verification flow

[Get a verification flow](https://www.ory.sh/docs/reference/api#tag/frontend/operation/getVerificationFlow).

```mdx-code-block
import getVerification from '!!raw-loader!../../../code-examples/sdk/go/frontend/get-verification.go'

<CodeBlock language="go" title="login.go">{getVerification}</CodeBlock>
```

### Submit login flow

To submit or complete a login flow you need to call the
[`updateLoginFlow`](https://www.ory.sh/docs/reference/api#tag/frontend/operation/updateLoginFlow) endpoint.

```mdx-code-block
import submitLogin from '!!raw-loader!../../../code-examples/sdk/go/frontend/submit-login.go'

<CodeBlock language="go" title="login.go">{submitLogin}</CodeBlock>
```

### Submit registration flow

To submit or complete a registration flow you need to call the
[`updateRegistrationFlow`](https://www.ory.sh/docs/reference/api#tag/frontend/operation/updateRegistrationFlow) endpoint.

```mdx-code-block
import submitRegistration from '!!raw-loader!../../../code-examples/sdk/go/frontend/submit-registration.go'

<CodeBlock language="go" title="login.go">{submitRegistration}</CodeBlock>
```

### Submit recovery flow

To submit or complete a recovery flow you need to call the
[`updateRecoveryFlow`](https://www.ory.sh/docs/reference/api#tag/frontend/operation/updateRecoveryFlow) endpoint.

```mdx-code-block
import submitRecovery from '!!raw-loader!../../../code-examples/sdk/go/frontend/submit-recovery.go'

<CodeBlock language="go" title="login.go">{submitRecovery}</CodeBlock>
```

### Submit verification flow

To submit or complete a recovery flow you need to call the
[`updateVerificationFlow`](https://www.ory.sh/docs/reference/api#tag/frontend/operation/updateVerificationFlow) endpoint.

```mdx-code-block
import submitVerification from '!!raw-loader!../../../code-examples/sdk/go/frontend/submit-verification.go'

<CodeBlock language="go" title="login.go">{submitVerification}</CodeBlock>
```

### Browser - check who the current HTTP session belongs to

This example uses [toSession](https://www.ory.sh/docs/reference/api#tag/frontend/operation/toSession) call to check if the session
is active.

1. Open the [Ory Identities Playground](https://playground.projects.oryapis.com/ui/) in your browser
1. Open **Sign Up** to create an account and log in
1. Copy the `ory_session_playground` cookie from the **Application** tab in your browser developer tools
1. Add the cookie value in `cookie`
1. Run the example and send the request with `go run main.go`

The response should look like this.

```go
Traits  map[email:youremail@example.com]
```

```mdx-code-block
import whoamiBrowser from '!!raw-loader!../../../code-examples/sdk/go/frontend/whoami-browser.go'

<CodeBlock language="go" title="login.go">{whoamiBrowser}</CodeBlock>
```

### Native - check who the current HTTP session belongs to

This example uses [toSession](https://www.ory.sh/docs/reference/api#tag/frontend/operation/toSession) call to check if the session
is active.

```mdx-code-block
import whoamiNative from '!!raw-loader!../../../code-examples/sdk/go/frontend/whoami-native.go'

<CodeBlock language="go" title="login.go">{whoamiNative}</CodeBlock>
```

### Get active sessions

[Get all active sessions](https://www.ory.sh/docs/reference/api#tag/frontend/operation/listMySessions) for the current user.

```mdx-code-block
import getActiveSessions from '!!raw-loader!../../../code-examples/sdk/go/frontend/get-active-sessions.go'

<CodeBlock language="go" title="login.go">{getActiveSessions}</CodeBlock>
```

### Perform logout flow

Use [performNativeLogout](https://www.ory.sh/docs/reference/api#tag/frontend/operation/performNativeLogout) to log out the current
user for API clients such as mobile devices or native applications. For browser clients create a logout URL using
[`createBrowserLogoutFlow`](https://www.ory.sh/docs/reference/api#tag/frontend/operation/createBrowserLogoutFlow). .

```mdx-code-block
import logout from '!!raw-loader!../../../code-examples/sdk/go/frontend/logout.go'

<CodeBlock language="go" title="login.go">{logout}</CodeBlock>
```

### Disable session

[Revoke a specific session](https://www.ory.sh/docs/reference/api#tag/identity/operation/disableSession) for the current user.

```mdx-code-block
import revokeSession from '!!raw-loader!../../../code-examples/sdk/go/frontend/revoke-session.go'

<CodeBlock language="go" title="login.go">{revokeSession}</CodeBlock>
```

### Disable all other sessions

[Revoke all other sessions](https://www.ory.sh/docs/reference/api#tag/frontend/operation/disableMyOtherSessions) for the current
user.

```mdx-code-block
import revokeOtherSessions from '!!raw-loader!../../../code-examples/sdk/go/frontend/revoke-other-sessions.go'

<CodeBlock language="go" title="login.go">{revokeOtherSessions}</CodeBlock>
```

## Identity API

To use the Identity Management API [`identity`](https://www.ory.sh/docs/reference/api#tag/identity) requests need to be
authorized.

- Create a free Developer project with the [Ory CLI](https://www.ory.sh/docs/guides/cli/installation) or
  [Ory Console](https://console.ory.sh/guides): `ory create project --name "Ory IdentityAPI Example"`
- Create a new [API key](https://www.ory.sh/docs/concepts/personal-access-token) and export it `export ORY_API_KEY=<your-api-key>`
- Run the example with `go run main.go`

### Create and delete identity

With this example you [create an identity](https://www.ory.sh/docs/reference/api#tag/identity/operation/createIdentity) and
[delete it](https://www.ory.sh/docs/reference/api#tag/identity/operation/deleteIdentity).

```mdx-code-block
import createDeleteIdentity from '!!raw-loader!../../../code-examples/sdk/go/identity/create-delete-identity.go'

<CodeBlock language="go" title="create-delete-identity.go">{createDeleteIdentity}</CodeBlock>
```

### Get identity

[Get an identity](https://www.ory.sh/docs/reference/api#tag/identity/operation/getIdentity) by its ID. You can optionally include
credentials, in this example social sign in connections.

```mdx-code-block
import gettoken from '!!raw-loader!../../../code-examples/sdk/go/social/get_token.go'

<CodeBlock language="go" title="state.go">{gettoken}</CodeBlock>
```

### Patch identity

[Patch an identity](https://www.ory.sh/docs/reference/api#tag/identity/operation/patchIdentity). In this example this is used to
set the identity `state`.

```mdx-code-block
import state from '!!raw-loader!../../../code-examples/sdk/go/identity/state.go'

<CodeBlock language="go" title="state.go">{state}</CodeBlock>
```

### Delete session

[Delete a specific session](https://www.ory.sh/docs/reference/api#tag/identity/operation/disableSession).

```mdx-code-block
import disableSession from '!!raw-loader!../../../code-examples/sdk/go/session/disable-session.go'

<CodeBlock language="go" title="login.go">{disableSession}</CodeBlock>
```

### Delete sessions

[Delete all sessions](https://www.ory.sh/docs/reference/api#tag/identity/operation/deleteIdentitySessions) for a user.

```mdx-code-block
import deleteIdentitySessions from '!!raw-loader!../../../code-examples/sdk/go/session/delete-sessions.go'

<CodeBlock language="go" title="login.go">{deleteIdentitySessions}</CodeBlock>
```

### Get session

[Get a specifc session](https://www.ory.sh/docs/reference/api#tag/identity/operation/getSessio<n).

```mdx-code-block
import getSession from '!!raw-loader!../../../code-examples/sdk/go/session/get-session.go'

<CodeBlock language="go" title="login.go">{getSession}</CodeBlock>
```

### Get sessions

[Get all sessions](https://www.ory.sh/docs/reference/api#tag/identity/operation/listSessions) for all users.

```mdx-code-block
import listSessions from '!!raw-loader!../../../code-examples/sdk/go/session/get-sessions.go'

<CodeBlock language="go" title="login.go">{listSessions}</CodeBlock>
```

### Refresh session

[Extend a session](https://www.ory.sh/docs/reference/api#tag/identity/operation/extendSession).

```mdx-code-block
import extendSession from '!!raw-loader!../../../code-examples/sdk/go/session/refresh-session.go'

<CodeBlock language="go" title="login.go">{extendSession}</CodeBlock>
```

## Go frameworks

### Gin middleware

The following code example shows how to use the Ory Identities Go SDK with the
[Gin Web Framework](https://github.com/gin-gonic/gin). Follow the instructions in the
[README](https://github.com/gin-gonic/gin/blob/master/README.md) to install Gin.

1. Run the Gin middleware with `go run main.go`
1. Open the [Ory Identities Playground](https://playground.projects.oryapis.com/ui/) in your browser
1. Open **Sign Up** to create an account and log in
1. Copy the `ory_session_playground` cookie from the **Application** tab in your browser developer tools
1. Add the cookie to the cUrl request below:

```curl
curl 'http://localhost:8080/ping' -b 'ory_session_playground=<your-session-cookie-here>'
pong
```

```mdx-code-block
import gin from '!!raw-loader!../../../code-examples/sdk/go/frameworks/gin.go'

<CodeBlock language="go" title="state.go">{gin}</CodeBlock>
```

### Echo middleware

The following code example shows how to use Ory Identities Go SDK with the [Echo framework](https://echo.labstack.com). Follow the
[instructions](https://echo.labstack.com/guide/#installation) to install Echo.

1. Run the Echo middleware with `go run main.go`
1. Open the [Ory Identities Playground](https://playground.projects.oryapis.com/ui/) in your browser
1. Open **Sign Up** to create an account and log in
1. Copy the `ory_session_playground` cookie from the **Application** tab in your browser developer tools
1. Add the cookie to the cUrl request below:

```curl
curl 'http://localhost:3000/hello' -b 'ory_session_playground=<your-session-cookie-here>'
Hello World
```

```mdx-code-block
import echo from '!!raw-loader!../../../code-examples/sdk/go/frameworks/echo.go'

<CodeBlock language="go" title="state.go">{echo}</CodeBlock>
```
