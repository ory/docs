---
title: "Basic: Olymp library"
---

## A basic, down-to-earth full feature example

Consider a file sharing application called "Olymp Library". Each file is stored in a key-value store, where the key is a UUIDv4
(pseudorandom unique identifier), while the value is the metadata and content. The application uses Ory Keto to keep track of
ownership and granted access on a per file level.

:::note

This example assumes there is a [namespace](../concepts/05_namespaces.mdx) `files` with the relations `owner` and `access`
defined, where each `owner` of an object also has `access` to that object. All relationships are stored in that namespace.

:::

Now, the user identified by its unique username `Bob` wants to upload a file containing the most fertile grounds. The file gets
assigned the UUID `ec788a82-a12e-45a4-b906-3e69f78c94e4`. The application adds the following
[relationship](../concepts/01_relation-tuples.mdx) to Ory Keto through the
[write-API](../concepts/25_api-overview.mdx#write-apis):

```keto-tuples
File:ec788a82-a12e-45a4-b906-3e69f78c94e4#owner@User:Bob
```

To prepare for an important meeting with the user `Alice`, `Bob` wants to share the file with fertile grounds with `Alice` so that
they can both read it. Therefore, he opens the "Olymp Library" and is presented with a list of all files he owns. The application
will internally request all [objects](../concepts/10_objects.mdx) (file IDs) with the owner `Bob` by using the
[list-API](../concepts/25_api-overview.mdx#list-relationships). The response will contain the object
`ec788a82-a12e-45a4-b906-3e69f78c94e4`, which the application maps to the file in question.

The user `Bob` will then ask the application to share the file with `Alice`. The application will translate that request into a
[write-API request](../concepts/25_api-overview.mdx#write-apis) adding the following relationship to Ory Keto:

```keto-tuples
File:ec788a82-a12e-45a4-b906-3e69f78c94e4#access@User:Alice
```

To confirm the successful operation, the application uses Ory Keto's
[expand-API](../concepts/25_api-overview.mdx#expand-subject-sets) to compile a list of everyone who can access the file:

```keto-tuples
// The following subject set is expanded by Keto
File:ec788a82-a12e-45a4-b906-3e69f78c94e4#access
```

which returns the expansion tree

```keto-tuples
∪ File:ec788a82-a12e-45a4-b906-3e69f78c94e4#access
├─ ∪ File:ec788a82-a12e-45a4-b906-3e69f78c94e4#owner
│  ├─ ☘ User:Bob
├─ ☘ User:Alice
```

The "Olymp Library" can then display this information to `Bob`.

When `Alice` wants to get the file containing fertile grounds, the application uses the
[check-API](../concepts/25_api-overview.mdx#check-relationships) to verify that `Alice` has access to the file before it returns
the file. This will allow `Bob` to revoke `Alice`'s access at any point by deleting the corresponding relationship.

This diagram illustrates the relationships in this example:

```mdx-code-block
import Mermaid from "@site/src/theme/Mermaid"

<Mermaid
  chart={`
flowchart TD
  obj1[File:ec788a82-a12e-45a4-b906-3e69f78c94e4] --- r1((owner))
  r1 ---- sub1(["User:Bob"])
  obj1 --- r2((access))
  r1 -.-> r2
  r2 --- sub2(["User:Alice"])
  style sub1 fill:green,color:white
  style sub2 fill:green,color:white
  style r1 fill:darkgreen,color:white
  style r2 fill:darkgreen,color:white
`}
/>
```
