---
id: vue
title: Vue.js + API
---

```mdx-code-block
import Teaser from '../_common/teaser.mdx'
import mp4 from '../_static/nextjs/screencast.mp4'
import webm from '../_static/nextjs/screencast.webm'

<Teaser
  framework={<a href="https://vuejs.org">Vue.js</a>}
  mp4={mp4}
  webm={webm}
/>
```

## Create Vue.js App

First, create a new Vue.js project. Run:

```shell-session
npx @vue/cli create ory-spa --preset "Default (Vue 3)"
cd ory-spa
```

## Install Ory SDK

Use `npm` to install the Ory SDK:

```shell-session
npm i --save @ory/client
```

## Check for Session in Component

Next we want to show whether the user is signed in or not, and provide links to the login and registration page, or to the account
settings or logout. To do that we modify the existing `HelloWorld.vue` component to include logic for handling the sessions and
links to login, logout, registration and account settings.

```mdx-code-block
import handlerVue from '!!raw-loader!../../../code-examples/protect-page-login/vue/src/components/HelloWorld.vue'
import CodeBlock from '@theme/CodeBlock'

<CodeBlock language="html" title="src/components/HelloWorld.vue">{handlerVue}</CodeBlock>
```

## Run Ory's API on `localhost`

Because Ory's security model uses HTTP cookies, we need to expose Ory's APIs on your `localhost` machine.

:::info

Make sure to either `localhost` or `127.0.0.1` but not both when developing locally. If the hostnames are different, Ory's APIs
might not be able to read the cookies properly.

:::

To achieve that we use the Ory Tunnel. It's like a microservice - the authentication API server - on your domain!

```shell-session
npx @ory/cli tunnel --dev --project <your-project-slug> http://localhost:8080

# Don't have a project? Use the public playground!
npx @ory/cli tunnel --dev --project playground http://localhost:8080
```

Ory's APIs are now mirrored on `http://localhost:4000`. We use that URL as the `baseUrl` for the `@ory/client` SDK (see the code
example above). The `--dev` flag disables security checks for easier integration and should not be used when deploying the tunnel
to staging.

## Run your Vue.js App

Great, that's it! Let's run your application! Set up your environment variables to connect with Ory's APIs

```mdx-code-block
import SdkEnvVar from '@site/src/components/SdkEnvVar'

<SdkEnvVar />
```

and start the Next.js development server:

```shell-session
npm run serve
```

and open [localhost:8080](http://localhost:8080/).

## Make Authenticated Calls to your API

To make authenticated requests to your API there are two main components:

1. When making AJAX requests you must set `{"credentials": "include"}` in the options. For the `fetch` method it looks like this:

```js
fetch(url, { credentials: 'include' })
```

2. Your API must have a CORS middleware with `credentials: true` and `Access-Control-Allow-Origin` of your frontend app (here
   `http://localhost:8080`).

Let's put this into action. Since we are already in the node ecosystem, we will create a quick HTTP API with express

```shell-script
mkdir my-api
cd my-api
npm init
npm i --save @ory/client express cors
```

and create a simple API in `index.js`:

```mdx-code-block
import handlerApi from '!!raw-loader!../../../code-examples/auth-api/expressjs/index.js'

<CodeBlock language="js" title="index.js">{handlerApi}</CodeBlock>
```

Next, we run the server:

```shell-session
node index.js
```

Let's open up our single page app at [localhost:8080](http://localhost:8080/), sign in and see if we can make authenticated
requests to our API!

## Go to Production

To move this app to production, we need to:

1. Build the VueJS app and run it somewhere (e.g. Vercel or Netlify);
2. Deploy our API (e.g. on Heroku);
3. Connect your project with a [custom domain](../custom-domains.mdx);

All these three components needs to be hosted on the same top-level domain as they were on your local machine:

| Component       | Production      | Local          |
| --------------- | --------------- | -------------- |
| Single Page App | www.example.org | localhost:8080 |
| API             | api.example.org | localhost:3000 |
| Ory             | ory.example.org | localhost:4000 |
