---
id: next.js
title: Protect a Page with Login in Next.js
sidebar_label: Next.js
---

```mdx-code-block
import Teaser from './_common/teaser.mdx'
import mp4 from './nextjs/screencast.mp4'
import webm from './nextjs/screencast.webm'

<Teaser
  framework={<a href="https://nextjs.org/">Next.js</a>}
  mp4={mp4}
  webm={webm}
/>
```

## Create Next.js App

First we create a new Next.js project:

```shell-session
npx create-next-app@latest --typescript
cd <your-project-directory>
```

## Install Ory

Ory provides integration tools that quickly combine Ory with Next.js. Let's
install Ory's SDK, used to make API calls to Ory, and Ory's Integration Tools
for JavaScript frameworks:

```shell-session
npm i --save @ory/integrations @ory/client
```

and create a special route

```mdx-code-block
import CodeBlock from '@theme/CodeBlock'
import apiRoute from '!!raw-loader!../../../code-examples/protect-page-login/nextjs/pages/api/.ory/\[...paths\].ts'

<CodeBlock language="tsx">{apiRoute}</CodeBlock>
```

This route connects your Next.js app with Ory's APIs and ensures that all
cookies and credentials are set up. Without it, your Next.js application won't
be able to talk to Ory's APIs.

## Require Login to Access the Home Page

Next we add a session check to the default home page of the Next.js example
application.The highlighted code is what we added to check whether the user is
signed in, and redirect them to the login page if not:

```mdx-code-block
import homePage from '!!raw-loader!../../../code-examples/protect-page-login/nextjs/pages/index.tsx'

<CodeBlock language="tsx">{homePage}</CodeBlock>
```

## Run your Next.js App

Great, that's it! Let's run your application! Set up your environment variables
to connect with Ory's APIs

```mdx-code-block
import SdkEnvVar from '@site/src/components/SdkEnvVar'

<SdkEnvVar />
```

and start the Next.js development server:

```shell-session
npm run dev
```

Then open [http://localhost:3000](http://localhost:3000) in your browser. are
presented with Ory's Sign In page! Let's click on sign up and create your first
user!

## Go to Production

Release your app bundled with Ory to production using:

```mdx-code-block
import VercelDeploy from '@site/src/components/VercelDeploy'

<VercelDeploy />
```
