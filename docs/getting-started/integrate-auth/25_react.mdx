---
id: react
title: Integrate authentication into React + API
sidebar_label: React
---

```mdx-code-block
import Teaser from '../_common/teaser.mdx'
import mp4 from '../_static/react/screencast.mp4'
import webm from '../_static/react/screencast.webm'

<Teaser
  framework={<a href="https://reactjs.org/">React</a>}
  mp4={mp4}
  webm={webm}
/>
```

## Create React app

First, create a new React project:

```shell
npm create vite@latest -- --template react-ts
cd app-name
npm install
```

## Create a new Ory project

```mdx-code-block
import CreateProject from '../_common/create-project.mdx'

<CreateProject />
```

## Install Ory SDK and CLI

To interact with Ory's APIs, install the Ory SDK and CLI:

```shell
npm i --save @ory/client-fetch @ory/cli
```

### Why do I need the Ory CLI

```mdx-code-block
import OryCLI from '../_common/ory-cli.mdx'

<OryCLI isTunnel={true} />
```

## Run Ory APIs on `localhost`

In a new terminal window, start the Ory Tunnel:

```shell
npx @ory/cli tunnel --dev http://localhost:5173
```

This command mirrors Ory APIs on `http://localhost:4000`. Use that URL as the `baseUrl` for the `@ory/client-fetch` SDK (see
`App.tsx` code below). The `--dev` flag disables security checks for easier integration and should not be used when running the
Tunnel in an insecure environment like public networks.

## Authenticate user

To implement authentication, modify the existing `App.tsx` component to include the following:

```mdx-code-block
import handlerReact from '!!raw-loader!../../../code-examples/protect-page-login/react/src/App.tsx'
import CodeBlock from '@theme/CodeBlock'

<CodeBlock language="tsx" title="./src/App.tsx">{handlerReact}</CodeBlock>
```

The component checks whether a user is signed in and if so, shows a logout link and the user's session information. Otherwise, it
shows a login and registration link.

## Run your React app

Now that your app is ready, it's time to run it! Start the React development server:

```shell
npm run dev
```

Go to [localhost:5173](http://localhost:5173/) to access your application.

## Make authenticated calls to your API

To make authenticated requests to your API there are two main components:

- When making AJAX requests you must set `{"credentials": "include"}` in the options. For the `fetch` method it looks like this:

```mdx-code-block
import AppWithAPI from '!!raw-loader!../../../code-examples/protect-page-login/react/src/AppWithApi.tsx'

<CodeBlock language="tsx" title="./src/AppWithAPI.tsx">{AppWithAPI}</CodeBlock>
```

- Your API must have a CORS middleware with `credentials: true` and `Access-Control-Allow-Origin` of your frontend app (here
  `http://localhost:5173`).

Let's put this into action. Create a simple HTTP API with express. Run:

```shell-script
mkdir api
cd api
npm init
npm i --save @ory/client-fetch express cors
```

Next, create a simple API in `index.js`:

```mdx-code-block
import handlerApi from '!!raw-loader!../../../code-examples/auth-api/expressjs/index.js'

<CodeBlock language="js" title="./server/index.js">{handlerApi}</CodeBlock>
```

Finally, start the server:

```shell
node index.js
```

### See it in action

Access your react app at [localhost:5173](http://localhost:8081/), sign in, and see if you can make authenticated requests to your
API!

## Go to production

To promote this app to production:

1. Build the React app and run it somewhere (for example on Vercel or Netlify)
2. Deploy the API (for example, on Heroku)
3. Connect your project with a [custom domain](../../guides/custom-domains.mdx)

These three components must be hosted on the same top-level domain as they were on your local machine:

| Component | Production      | Local          |
| --------- | --------------- | -------------- |
| React App | www.example.org | localhost:5173 |
| API       | api.example.org | localhost:8081 |
| Ory       | ory.example.org | localhost:4000 |
