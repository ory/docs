---
id: nextjs
title: Integrate authentication into Next.js
sidebar_label: Next.js
---

```mdx-code-block
import Teaser from '../_common/teaser.mdx'
import mp4 from '../_static/nextjs/screencast.mp4'
import webm from '../_static/nextjs/screencast.webm'

<Teaser
  framework={<a href="https://nextjs.org">Next.js</a>}
  mp4={mp4}
  webm={webm}
/>
```

## Create Next.js app

First, create a new Next.js project. Run:

```shell
npx create-next-app@latest
cd app-name
```

When prompted, select the following options:

- Use TypeScript: Yes
- Use ESLint: Yes
- Use Tailwind CSS: Yes
- Use `src/` directory: No
- Use App Router: Yes
- Customize the default import alias: No

## Create a new Ory project

```mdx-code-block
import CreateProject from '../_common/create-project.mdx'

<CreateProject />
```

## Install Ory SDK

To interact with Ory's APIs, install the Ory SDK:

```
npm i @ory/client-fetch
```

## Install Ory CLI

Follow [this guide](../../guides/cli/01_installation.mdx) to install the Ory CLI on your machine.

### Why do I need the Ory CLI

```mdx-code-block
import OryCLI from '../_common/ory-cli.mdx'

<OryCLI isTunnel={true} />
```

## Run Ory APIs on `localhost`

In a new terminal window, run the Ory Tunnel:

```shell
ory tunnel --project <project-id> http://localhost:3000
```

This command mirrors Ory APIs on `http://localhost:4000`. Use that URL as the `basePath` for the `@ory/client-fetch` SDK.

## Authenticate user

To implement authentication, modify the existing `app/page.tsx` component to include the following:

```mdx-code-block
import CodeBlock from '@theme/CodeBlock'
import HomePage from '!!raw-loader!../../../code-examples/protect-page-login/nextjs/app/page.tsx'

<CodeBlock language="tsx">{HomePage}</CodeBlock>

```

The component checks whether a user is signed in and if so, shows a logout link and the user's session information. Otherwise, it
shows a login and registration link.

## Run your Next.js app

Now that your app is ready, it's time to run it! Start the Next.js development server:

```shell
npm run dev
```

Go to [localhost:3000](http://localhost:3000/) to access your application.

### See it in action

Access your Next.js app at [localhost:3000](http://localhost:3000/), register a new acocunt, and sign in.

## Make authenticated requests to your API

TODO

## Go to production

To promote this app to production:

1. Build the Next.js app and deploy it (for example on Vercel or Netlify)
2. Connect your project with a [custom domain](../../guides/custom-domains.mdx)

These components must be hosted on the same top-level domain as they were on your local machine:

| Component   | Production      | Local          |
| ----------- | --------------- | -------------- |
| Next.js App | www.example.org | localhost:3000 |
| Ory         | ory.example.org | localhost:4000 |
