---
id: custom-ui-preact-ory-elements
title: Learn how to create custom UI for a Preact TypeScript SPA with Ory Elements
sidebar_label: Custom UI with Ory Elements
toc_max_heading_level: 4
---

Ory Elements is a component library designed to make building login, registration, and account pages for Ory quick and easy. Ory
Elements is modular and customizable, which means that you can use only the views you need and style them to match your
implementation's design.

The UI created with Ory Elements changes dynamically to adapt to your Ory Network configuration, for example, by adjusting the
sign-up form to reflect the changes introduced to the Identity Schema or by providing the necessary views for 2FA flows.

This example provides a closer look at integrating Ory Elements with a [Preact](https://preactjs.com/) TypeScript single-page
application (SPA). By following the instructions you will:

- Create a simple Preact Typescript SPA.
- Install Ory Elements and Ory SDK as dependencies.
- Create UI views for the application with Ory Elements and allow the UI to consume Ory APIs through the Ory SDK.
- Use Ory CLI to connect the application running on your machine to your Ory Network project's APIs.

:::tip

Ory Elements integrates with:

- Preact
- React
- Express.js (experimental)

Visit the [project repository](https://github.com/ory/elements) to learn more.

:::

## Prerequisites

Before you start, make sure to:

- Create an [Ory Network project](https://console.ory.sh/).
- Install Ory CLI - a tool that will help you connect the app running on your machine to Ory Network APIs.

## Create a sample app

Create a basic Preact Typescript SPA. You will integrate Ory Elements into this app and connect it into your Ory Network project.

````mdx-code-block
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeFromRemote from "@theme/CodeFromRemote"

<Tabs>
  <TabItem value="vite" label="Vite" default>

```shell
npm create vite@latest my-preact-app --template preact-ts
```

  </TabItem>
  <TabItem value="preact-cli" label="Preact CLI">

```shell
npx preact-cli create typescript my-preact-app
```

  </TabItem>
</Tabs>
````

### Install dependencies

After you create the application, install Ory Elements and the Ory SDK as dependencies. This allows you to use the UI views
provided by Ory Elements to interact with Ory Network APIs to experience real-life user interactions and the dynamic nature of
Elements.

To install both dependencies, run this command:

```shell-session
npm i @ory/client @ory/elements-preact wouter --save
```

After installing the dependencies, your `package.json` should look similar to this:

```mdx-code-block
<CodeFromRemote
  lang="json"
  title="package.json"
  src="https://raw.githubusercontent.com/ory/elements/main/examples/preact-spa/package.json"
/>
```

## Integrate Ory Elements

After creating the application and installing dependencies, you can start integrating Ory Elements and Ory SDK.

### Create new instance of Ory SDK

The `sdk.ts` file is responsible for creating a new instance of the Ory SDK. This instance will be used to interact with Ory APIs.

```mdx-code-block
<CodeFromRemote
  lang="ts"
  title="src/sdk.ts"
  src="https://raw.githubusercontent.com/ory/elements/main/examples/preact-spa/src/sdk.ts"
/>
```

### Create Preact entry point

The `main.tsx` file is the main entry point for Preact. This file contains routes and themes for other pages used by the app. The
application is wrapped with Ory Elements using `<ThemeProvider />`.

```mdx-code-block
<CodeFromRemote
  lang="tsx"
  title="src/main.tsx"
  src="https://raw.githubusercontent.com/ory/elements/main/examples/preact-spa/src/main.tsx"
/>
```

### Create landing page

The `app.tsx` file defines the landing page of the application. If you want to protect access to an app, set up authentication to
secure this page.

```mdx-code-block
<CodeFromRemote
  lang="tsx"
  title="src/app.tsx"
  src="https://raw.githubusercontent.com/ory/elements/main/examples/preact-spa/src/app.tsx"
/>
```

### Login and registration pages

The `login.tsx` and `register.tsx` pages contain components that interact with Ory APIs to allow registering accounts and
performing the login flow.

These pages are dynamic and will show relevant fields based on your Ory Network project configuration. To see the pages change,
edit your project's [Identity Schema](../../kratos/manage-identities/identity-schema) or try changing adjusting project settings
and enable [passwordless](../kratos/passwordless/webauthn) flows.

#### Registration

The registration page, defined in the `register.tsx` file:

1. Gets the registration flow (if it exists in the URL) or fallback to start the registration flow to get the `flow` data on page
   load.
2. Submits the registration form data the user provides when they click the **Submit** button,

:::tip

To learn more about the self-service registration flow, read [this document](../kratos/self-service/flows/user-registration)

:::

```mdx-code-block
<CodeFromRemote
  lang="tsx"
  title="src/register.tsx"
  src="https://raw.githubusercontent.com/ory/elements/main/examples/preact-spa/src/register.tsx"
/>
```

#### Login

The login page, defined in the `login.tsx` file:

1. Gets the login flow (if it exists in the URL) or falls back to start the registration flow to get the `flow` data on page load.
2. Submits the login form data the user provides when they click the **Submit** button,

:::tip

To learn more about the self-service login flow, read [this document](../kratos/self-service/flows/user-login)

:::

```mdx-code-block
<CodeFromRemote
  lang="tsx"
  title="src/login.tsx"
  src="https://raw.githubusercontent.com/ory/elements/main/examples/preact-spa/src/login.tsx"
/>
```

## See Ory Elements in action

After setting up the application and creating all pages, run the application on your machine, connect it to Ory Network APIs, and
see Ory Elements in action. Follow these steps:

1. Set your environment variables through the following commands, or store them in an `.env` file:

   ````mdx-code-block

   <Tabs>
     <TabItem value="unix" label="Unix systems" default>

   ```shell-session
   export VITE_ORY_SDK_URL=http://localhost:4000
   ```

     </TabItem>
     <TabItem value="powershell" label="Windows Powershell">

   ```powershell
   $Env:VITE_ORY_SDK_URL = "https://{your-project-slug-here}.projects.oryapis.com"
   ```

     </TabItem>
   </Tabs>
   ````

2. Start the application locally and run Ory Tunnel to create a connection between the application and Ory APIs:

   ```shell
   # Start the app on port 3000
   npm run dev --port 3000

   # Run Ory Tunnel to connect to Ory APIs.
   # To get your project slug, go to 'Access & APIs' in your Ory Network project

   ory tunnel http://localhost:3000 --project <project-slug> --dev
   ```

3. In your browser, go to [http://localhost:3000](http://localhost:3000) to access the application. From there, you can try
   registering and signing-in using the Ory Elements-powered pages.
