---
id: redirects
title: Browser Redirects and Flow Completion
---

Ory Cloud offers methods to integrate your own user interface (UI) such as
utilizing the SDK in Single Page Applications (ReactJs, Angular, VueJs etc.) or
using redirects in Server Side Applications (NodeJs, PHP, Golang etc.).

On this page of the documentation we will be covering Browser Redirects and how
to configure it on Ory Cloud console. If you are interested in utilizing the SDK
for Single Page Applications, check out our [SDK](./services-api.mdx)
documentation.

## Allow list

Ory Cloud allows dynamic redirects to be set using the `?return_to=` query
parameter on [Self-Service Flows](./self-service.mdx). For example: A user opens
a sharable link to go to `https://myapp.com/posts`. This URL requires the user
to be signed in and redirects the user back to the login page. To return the
user back to the original URL append `?return_to=https://myapp.com/posts` when
starting the self-service login flow `initSelfServiceLogin`:

```js
    "request_url": "http://<your-project>.projects.oryapis.com/self-service/login/browser?return_to=...",
```

`return_to` is set when `initSelfServiceLogin` is called in a browser with a
`return_to` URL set. For API clients such as AJAX
[visit this section](#api-clients).

The `allow list` is used to prevent
[Open Redirect Attacks](https://cheatsheetseries.owasp.org/cheatsheets/Unvalidated_Redirects_and_Forwards_Cheat_Sheet.html)
by only allowing certain domains, or paths on a domain. As in the example below
`https://sub.domain.myapp.com/only/path` needs to match the sub-domain and path
for it to be allowed. Other redirects using `myapp.com` will fail. Redirects
using `https://anotherapp.com` will succeed on any path.

![Browser Redirects Allow List](/images/browser-redirects/browser-redirects-allow-list.png)

## Redirect flows

Ory Cloud has a total of six flows, **Login**, **Registration**,
**Verification**, **Recovery**, **Settings** and **Logout** which can be
configured to redirect back to any URL. A common use case would be to redirect
the user to your application home screen after a logout or to a specific URL on
a sub-domain after a settings password update.

On project creation the redirect flows are set to the default
[Managed User Interface](./managed-ui.mdx).

### Login, registration and settings

The `Login` and `Registration` flows have three fields (all optional):

1. `Default Redirect URL` domain or path relative to your application URL
2. `Post-Password Redirect URL`
3. `Post-OIDC Redirect URL` (_coming soon_)

The `Settings` flow has three fields (all optional):

1. `Default Redirect URL` domain or path relative to your application URL
2. `Post-Password Redirect URL`
3. `Post-Profile Redirect URL`

To overwrite the `Global Redirect URL` set the `Default Redirect URL` to a fully
qualified domain name
([FQDN](https://en.wikipedia.org/wiki/Fully_qualified_domain_name) - for example
`https://domain.example/login`).  
To replace the `Global Redirect URL` path set the `Default Redirect URL` to a
path. For example when setting it to `/login`,
`https://domain.example/global/path` becomes `https://domain.example/login`.

The `Default Redirect URL` is used when Ory isn't sure where to redirect. Itâ€™s a
good idea for this to be your default app URL, for example `/` or the dashboard.
Use sub-conditions to control where users are redirected after registration,
login, and other self-service flows.

On sub-conditions such as `After Password` or `After Profile` an FQDN or a path
can be set.  
Set the `Post-` redirect to a FQDN to replace the closest relative, starting
with the Login/Registration `Default Redirect URL` and then the
`Global Redirect URL`.  
Set the `Post-` redirect to a path to use the closest relative as the base URL -
as described above with the `Default Redirect URL`.

All the relative URLs will be updated with their respective base URL. As shown
in the example below, the `Post-Login Default Redirect URL` has been set to use
a path. This means the base URL will be the `Global Redirect URL`
(`https://myapp.com`). This will set the Login `Default Redirect URL` to
`https://myapp.com/after/login` and the `Post-Password` to
`https://myapp.com/after/login/password`.

![Browser Redirects Url Management](/images/browser-redirects/browser-redirects-url-management.png)

In the example below , the `Post-Login Default Redirect URL` has been set to use
a FQDN. This will set the Login `Default Redirect URL` to
`https://myapp.com/after/login` and the `Post-Password` to
`https://myapp.com/after/login/password`.

![Browser Redirects URL Management Transformed](/images/browser-redirects/browser-redirects-url-management-2.png)

### Verification, recovery and logout

:::warning

The `Post-Recovery` redirect isn't supported and will automatically redirect the
user to the `Settings UI` URL.  
Use the `Post-Settings` redirect of `Post-Recovery` flows.

:::

Each of these flows has only a single field, the `Default Redirect URL`. As with
Login, Registration and Settings configurations, the `Default Redirect URL` can
be an FQDN or a path.

![Browser Redirects URL Management Transformed](/images/browser-redirects/browser-redirects-url-management-3.png)

## Reset and update flows

A redirect can be updated or deleted by either changing the current redirects
value or deleting the entry and clicking the **Update** button. All flows can be
reset at once with the **Reset Flows** button which will prompt a confirmation
box. Resetting all flows will reset all the fields back to the default value
which is the Ory Cloud [Managed User Interface](./managed-ui.mdx).

Once a flow has been reset or updated it will take effect immediately on **new**
flows. Old flows that haven't expired yet won't be updated.

![Browser Redirects URL Reset All](/images/browser-redirects/browser-redirects-reset-all.png)

## Troubleshooting

### API clients

The browser redirects only work for regular browser requests.  
If you are using an API Client for example AJAX, redirect the user to the right
endpoint in the application, for example:

```ts
          .then((res) => {
            router.push('/<your-route>')
          })
```

### `incorrect format`

The [allow list](#allow-list) and any of the post-flow redirects require a valid
URL to be set with a scheme (HTTP or HTTPS). An example of a valid URL is
`https://www.google.com`.

![Browser Redirects URL Error Message](/images/browser-redirects/browser-redirects-error-messages-1.png)

![Browser Redirects URL Error Message Flows](/images/browser-redirects/browser-redirects-error-messages-flows.png)

### Domain denied

URLs not matching any of the allowed URLs will automatically be denied.

![Browser Redirects URL Error Message](/images/browser-redirects/browser-redirects-error-messages-2.png)

## Read more

For a deeper dive into the background of browser redirects, head over to our
open source documentation:

- [HTTP Redirection Configuration](https://www.ory.sh/kratos/docs/concepts/browser-redirect-flow-completion)
