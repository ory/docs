---
id: token-expiration
title: Configuring expiration
---

In the Hydra config.yaml - located in your Hydra directory - you can set times for how long a login/consent flow may take,
expiration times for access tokens, refresh tokens, id tokens and auth codes.

Furthermore, if you require different clients to have different token lifespans, the Hydra admin API exposes and endpoint that
allows the configuration of individual clients. The client configuration takes precedence over the instance-wide configuration.
See [Client Token Lifespan configuration](#client-token-lifespan-configuration).

## Instance-wide configuration

### Login and consent request expiration

Key `ttl.login_consent_request` configures how long a user login and consent flow may take.

```json title="path/to/hydra/config.yaml"
#....
  ## login_consent_request ##
  #
  # Configures how long a user login and consent flow may take.
  #
  # Default value: 1h
  #
  # Set this value using environment variables on
  # - Linux/macOS:
  #    export TTL_LOGIN_CONSENT_REQUEST=<value>
  # - Windows Command Line (CMD):
  #    > set TTL_LOGIN_CONSENT_REQUEST=<value>
  #
  login_consent_request: 1h
 #....
```

### Access Token expiration

Key `ttl.access_token` configures how long access tokens are valid.

```json title="path/to/hydra/config.yaml"
#....
  ## access_token ##
  #
  # Configures how long access tokens are valid.
  #
  # Default value: 1h
  #
  # Set this value using environment variables on
  # - Linux/macOS:
  #    export TTL_ACCESS_TOKEN=<value>
  # - Windows Command Line (CMD):
  #    > set TTL_ACCESS_TOKEN=<value>
  #
  access_token: 1h
   #....
```

### Refresh Token expiration

Key `ttl.refresh_token` configures how long refresh tokens are valid. Set to -1 for refresh tokens to never expire.

```json title="path/to/hydra/config.yaml"
#....
  ## refresh_token ##
  #
  # Configures how long refresh tokens are valid. Set to -1 for refresh tokens to never expire.
  #
  # Default value: 720h
  #
  # Set this value using environment variables on
  # - Linux/macOS:
  #    export TTL_REFRESH_TOKEN=<value>
  # - Windows Command Line (CMD):
  #    > set TTL_REFRESH_TOKEN=<value>
  #
  refresh_token: "-1"
    #....
```

### ID Token Expiration

Key `ttl.id_token` configures how long id tokens are valid.

```json title="path/to/hydra/config.yaml"
#....
  ## id_token ##
  #
  # Configures how long id tokens are valid.
  #
  # Default value: 1h
  #
  # Set this value using environment variables on
  # - Linux/macOS:
  #    export TTL_ID_TOKEN=<value>
  # - Windows Command Line (CMD):
  #    > set TTL_ID_TOKEN=<value>
  #
  id_token: 1h
     #....
```

### Auth Code expiration

Key `ttl.auth_code` configures how long auth codes are valid.

```json title="path/to/hydra/config.yaml"
#....
  ## auth_code ##
  #
  # Configures how long auth codes are valid.
  #
  # Default value: 10m
  #
  # Set this value using environment variables on
  # - Linux/macOS:
  #    export TTL_AUTH_CODE=<value>
  # - Windows Command Line (CMD):
  #    > set TTL_AUTH_CODE=<value>
  #
  auth_code: 1h
     #....
```

## Client Token Lifespan configuration

Individual OAuth2 Clients can have their lifespans configured using the UpdateOAuth2ClientLifespans endpoint. The endpoint is
documented in the [API reference](../reference/api#operation/UpdateOAuth2ClientLifespans) and its details are also available in
the [SDKs](../sdk). This endpoint allows for configuration of each combination of Client, Grant Type, and Token Type.

```json title=example-payload.json
{
  "authorization_code_grant_access_token_lifespan": "1h",
  "authorization_code_grant_id_token_lifespan": "12h",
  "authorization_code_grant_refresh_token_lifespan": "24h",
  "client_credentials_grant_access_token_lifespan": "1h",
  "implicit_grant_access_token_lifespan": "1h",
  "implicit_grant_id_token_lifespan": "12h",
  "jwt_bearer_grant_access_token_lifespan": "1h",
  "refresh_token_grant_access_token_lifespan": "1h",
  "refresh_token_grant_id_token_lifespan": "12h",
  "refresh_token_grant_refresh_token_lifespan": "24h"
}
```
